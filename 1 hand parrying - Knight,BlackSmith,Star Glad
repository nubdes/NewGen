skill.c 
find :
 function of require.weapon replace two codes with the code below

if( require.weapon && !(pc_check_weapontype(sd,require.weapon) || (skill_id = LK_PARRYING && sc && sc->data[SC_SPIRIT] && sc->data[SC_SPIRIT]->val2 == SL_KNIGHT && sd->status.weapon == W_1HSWORD) || (skill_id = LK_PARRYING && sc && sc->data[SC_SPIRIT] && sc->data[SC_SPIRIT]->val2 == SL_STAR && sd->status.weapon == W_BOOK) ) ){
		clif_skill_fail(sd,skill_id,USESKILL_FAIL_THIS_WEAPON,0);
	return false;
	}
